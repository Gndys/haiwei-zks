<!doctype html>
<html lang="zh-CN">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>图片替换预览（原图 vs 替换图）</title>
  <style>
    :root { --bg:#0b1220; --card:#0f1b33; --muted:#9db0d0; --text:#e7efff; --border:#203356; --accent:#6aa6ff; }
    * { box-sizing: border-box; }
    body { margin: 0; font-family: ui-sans-serif, system-ui, -apple-system, Segoe UI, Roboto, "PingFang SC", "Microsoft YaHei", Arial, sans-serif; background: linear-gradient(180deg, #070b14, var(--bg)); color: var(--text); }
    a { color: var(--accent); text-decoration: none; }
    a:hover { text-decoration: underline; }
    header { padding: 20px 18px 10px; border-bottom: 1px solid var(--border); position: sticky; top: 0; background: rgba(11,18,32,.9); backdrop-filter: blur(10px); }
    header h1 { margin: 0 0 6px; font-size: 18px; font-weight: 700; }
    header p { margin: 0; color: var(--muted); font-size: 13px; line-height: 1.5; }
    main { padding: 16px 18px 40px; max-width: 1200px; margin: 0 auto; }
    .controls { display: flex; flex-wrap: wrap; gap: 10px; align-items: center; margin: 12px 0 16px; }
    .chip { display: inline-flex; gap: 8px; align-items: center; padding: 8px 10px; border: 1px solid var(--border); border-radius: 10px; background: rgba(255,255,255,.03); }
    .chip label { color: var(--muted); font-size: 12px; }
    .chip select { background: transparent; color: var(--text); border: 1px solid var(--border); border-radius: 8px; padding: 6px 8px; }
    .chip input { transform: translateY(1px); }

    .grid { display: grid; gap: 12px; }
    .card { border: 1px solid var(--border); border-radius: 14px; background: rgba(255,255,255,.03); overflow: hidden; }
    .card-head { padding: 12px 12px 10px; border-bottom: 1px solid var(--border); display: flex; flex-wrap: wrap; gap: 10px; align-items: center; justify-content: space-between; }
    .title { font-weight: 700; font-size: 14px; }
    .meta { color: var(--muted); font-size: 12px; }

    .card-body { display: grid; grid-template-columns: 1fr 1fr; gap: 12px; padding: 12px; }
    @media (max-width: 980px) { .card-body { grid-template-columns: 1fr; } }

    .panel { border: 1px solid var(--border); border-radius: 12px; overflow: hidden; background: rgba(0,0,0,.15); }
    .panel-head { display: flex; justify-content: space-between; align-items: center; gap: 10px; padding: 10px 10px 8px; border-bottom: 1px solid var(--border); }
    .panel-head strong { font-size: 13px; }
    .panel-head span { color: var(--muted); font-size: 12px; }

    .img-wrap { width: 100%; max-width: 560px; margin: 10px auto 12px; border-radius: 10px; overflow: hidden; border: 1px solid rgba(255,255,255,.08); background: rgba(0,0,0,.25); }
    .img-box { width: 100%; aspect-ratio: var(--w) / var(--h); display: flex; align-items: center; justify-content: center; }
    .img-box img { width: 100%; height: 100%; display: block; }

    .fit-contain img { object-fit: contain; background: rgba(0,0,0,.35); }
    .fit-cover img { object-fit: cover; }

    .placeholder { padding: 18px; color: var(--muted); font-size: 12px; line-height: 1.5; text-align: center; }

    .hint { padding: 0 10px 12px; color: var(--muted); font-size: 12px; line-height: 1.5; }
    .row { display: flex; flex-wrap: wrap; gap: 8px; padding: 10px; border-top: 1px solid var(--border); align-items: center; justify-content: space-between; }
    .row .left { display: flex; gap: 8px; flex-wrap: wrap; align-items: center; }
    .row select { background: transparent; color: var(--text); border: 1px solid var(--border); border-radius: 8px; padding: 6px 8px; min-width: 220px; }
    .badge { color: var(--muted); font-size: 12px; padding: 3px 8px; border: 1px solid rgba(255,255,255,.10); border-radius: 999px; background: rgba(255,255,255,.04); }

    .warn { padding: 10px 12px; margin: 14px 0 0; border-radius: 12px; border: 1px solid rgba(255,180,80,.35); background: rgba(255,180,80,.08); color: #ffd6a1; font-size: 12px; line-height: 1.5; }
    code { font-family: ui-monospace, SFMono-Regular, Menlo, Consolas, monospace; font-size: 12px; color: #cfe3ff; }
  </style>
</head>
<body>
  <header>
    <h1>图片替换预览（原图 vs 替换图）</h1>
    <p>只做展示对比：左边是网站当前图片，右边是你“替换图片”文件夹里的候选图（含“居中裁剪”的模拟预览）。</p>
  </header>

  <main>
    <div class="controls">
      <div class="chip"><label>默认候选</label>
        <select id="defaultSet">
          <option value="suggested">按当前分配</option>
          <option value="first">每组候选第1张</option>
          <option value="none">不自动选择</option>
        </select>
      </div>
      <div class="chip"><label><input type="checkbox" id="showCrop" checked> 显示“裁剪预览”</label></div>
      <div class="chip"><label><input type="checkbox" id="showRaw" checked> 显示“原始比例”</label></div>
    </div>

    <div class="warn">
      说明：这里用 <code>object-fit: cover</code> 来模拟“居中裁剪以匹配目标区域”的效果。<br/>
      你已确认：<b>首页轮播图 1/2 不替换</b>；原本用于轮播的两张替换图用于“关于我们”正文两张图。
    </div>

    <div id="grid" class="grid" style="margin-top: 14px;"></div>
  </main>

  <script>
    const replacements = [
      { id: 'frontdesk', label: '前台/接待台', path: '替换图片/微信图片_20260104133849_336_77.png' },
      { id: 'warehouse_01', label: '仓库/箱子堆放全景', path: '替换图片/微信图片_20260104133901_337_77.jpg' },
      { id: 'warehouse_02', label: '仓库通道/货架', path: '替换图片/微信图片_20260104133905_338_77.jpg' },

      { id: 'workshop_01', label: '车间图 01（设备/产线）', path: '替换图片/车间生产图片/0ddb30c3b5070b0cc2080ed615e647cd.jpg' },
      { id: 'workshop_02', label: '车间图 02（仓库/物料）', path: '替换图片/车间生产图片/218b561a4243b3fb3aa1f9e9b1e187cc.jpg' },
      { id: 'workshop_03', label: '车间图 03（设备：BO WANG）', path: '替换图片/车间生产图片/4ed8c0534a876465cded552e3a3e8903.jpg' },
      { id: 'workshop_04', label: '车间图 04（设备/产线）', path: '替换图片/车间生产图片/59c9fa008d4c67f9508df77acbadf140.jpg' },
      { id: 'workshop_05', label: '车间图 05（绕线/线材）', path: '替换图片/车间生产图片/7a7cfb4b7ae81fa68a2005be8a23a4e5.jpg' },
      { id: 'workshop_06', label: '车间图 06（检测/设备）', path: '替换图片/车间生产图片/8d700ccf31ec92e61e892064cb4da2e0.png' },
      { id: 'workshop_07', label: '车间图 07（压接/设备）', path: '替换图片/车间生产图片/a58e422f7997d651964a052c1e3e613c.jpg' },
      { id: 'workshop_08', label: '车间图 08（端子/设备）', path: '替换图片/车间生产图片/d735264731f963c751222081c3d76e11.png' },
      { id: 'workshop_09', label: '车间图 09（装配流水线/工位）', path: '替换图片/车间生产图片/fa8c72dfd78ad517e000d460bf2e86de.png' },
    ];

    const byId = Object.fromEntries(replacements.map(r => [r.id, r]));

    const targets = [
      {
        id: 'about_thumb',
        label: '首页「关于我们」缩略图',
        targetPath: 'hbzkxs-site/static/upload/image/20211219/1639906395997251.jpg',
        w: 640, h: 425,
        candidates: ['frontdesk', 'workshop_09', 'workshop_01'],
        suggested: 'frontdesk'
      },

      {
        id: 'about_body_1',
        label: '关于我们页面正文图（第1张）',
        targetPath: 'hbzkxs-site/static/upload/image/20211218/1639832844300946.jpg',
        w: 900, h: 675,
        candidates: ['warehouse_01', 'warehouse_02'],
        suggested: 'warehouse_01'
      },
      {
        id: 'about_body_2',
        label: '关于我们页面正文图（第2张，新增）',
        targetPath: '',
        w: 900, h: 675,
        candidates: ['warehouse_02', 'warehouse_01'],
        suggested: 'warehouse_02'
      },

      // 生产车间（20211220）6张：页面/列表/首页都会复用
      { id: 'workshop_20211220_1', label: '生产车间图 1（20211220）', targetPath: 'hbzkxs-site/static/upload/image/20211220/1639986768516176.jpg', w: 550, h: 413, candidates: ['workshop_01','workshop_02','workshop_03','workshop_04','workshop_05','workshop_06','workshop_07','workshop_08','workshop_09'], suggested: 'workshop_02' },
      { id: 'workshop_20211220_2', label: '生产车间图 2（20211220）', targetPath: 'hbzkxs-site/static/upload/image/20211220/1639986783385693.jpg', w: 550, h: 413, candidates: ['workshop_01','workshop_02','workshop_03','workshop_04','workshop_05','workshop_06','workshop_07','workshop_08','workshop_09'], suggested: 'workshop_01' },
      { id: 'workshop_20211220_3', label: '生产车间图 3（20211220）', targetPath: 'hbzkxs-site/static/upload/image/20211220/1639986813578043.jpg', w: 550, h: 413, candidates: ['workshop_01','workshop_02','workshop_03','workshop_04','workshop_05','workshop_06','workshop_07','workshop_08','workshop_09'], suggested: 'workshop_09' },
      { id: 'workshop_20211220_4', label: '生产车间图 4（20211220）', targetPath: 'hbzkxs-site/static/upload/image/20211220/1639986824594396.jpg', w: 550, h: 413, candidates: ['workshop_01','workshop_02','workshop_03','workshop_04','workshop_05','workshop_06','workshop_07','workshop_08','workshop_09'], suggested: 'workshop_04' },
      { id: 'workshop_20211220_5', label: '生产车间图 5（20211220）', targetPath: 'hbzkxs-site/static/upload/image/20211220/1639986835520918.jpg', w: 550, h: 413, candidates: ['workshop_01','workshop_02','workshop_03','workshop_04','workshop_05','workshop_06','workshop_07','workshop_08','workshop_09'], suggested: 'workshop_07' },
      { id: 'workshop_20211220_6', label: '生产车间图 6（20211220）', targetPath: 'hbzkxs-site/static/upload/image/20211220/1639986846709326.jpg', w: 550, h: 413, candidates: ['workshop_01','workshop_02','workshop_03','workshop_04','workshop_05','workshop_06','workshop_07','workshop_08','workshop_09'], suggested: 'workshop_05' },

      // 生产车间（20230727）原来是竖图/横图混合：这里先保留预览（如你不想动这组，后续可以不替换）
      { id: 'workshop_20230727_a', label: '生产车间图（20230727）A', targetPath: 'hbzkxs-site/static/upload/image/20230727/1690425785192477.jpg', w: 500, h: 667, candidates: ['workshop_01','workshop_02','workshop_03','workshop_04','workshop_05','workshop_06','workshop_07','workshop_08','workshop_09'], suggested: 'workshop_03' },
      { id: 'workshop_20230727_b', label: '生产车间图（20230727）B', targetPath: 'hbzkxs-site/static/upload/image/20230727/1690425905125950.jpg', w: 450, h: 600, candidates: ['workshop_01','workshop_02','workshop_03','workshop_04','workshop_05','workshop_06','workshop_07','workshop_08','workshop_09'], suggested: 'workshop_08' },
      { id: 'workshop_20230727_list1', label: '生产车间列表缩略图（20230727）1', targetPath: 'hbzkxs-site/static/upload/image/20230727/1690425724927342.jpg', w: 550, h: 413, candidates: ['workshop_01','workshop_02','workshop_03','workshop_04','workshop_05','workshop_06','workshop_07','workshop_08','workshop_09'], suggested: 'workshop_06' },
      { id: 'workshop_20230727_list2', label: '生产车间列表缩略图（20230727）2', targetPath: 'hbzkxs-site/static/upload/image/20230727/1690425898518648.jpg', w: 550, h: 413, candidates: ['workshop_01','workshop_02','workshop_03','workshop_04','workshop_05','workshop_06','workshop_07','workshop_08','workshop_09'], suggested: 'workshop_01' },
    ];

    const elGrid = document.getElementById('grid');
    const elDefaultSet = document.getElementById('defaultSet');
    const elShowCrop = document.getElementById('showCrop');
    const elShowRaw = document.getElementById('showRaw');

    function optionHtml(ids) {
      return ids.map(id => {
        const r = byId[id];
        return `<option value="${id}">${r.label} — ${r.path}</option>`;
      }).join('');
    }

    function createCard(t) {
      const card = document.createElement('section');
      card.className = 'card';

      const head = document.createElement('div');
      head.className = 'card-head';

      const targetLabel = t.targetPath ? `<code>${t.targetPath}</code>` : `<span class="badge">新增图片位（页面新增一张图）</span>`;
      const openLink = t.targetPath
        ? `<a href="${t.targetPath}" target="_blank" rel="noreferrer">打开原图</a>`
        : `<span class="meta" style="opacity:.7">无原图</span>`;

      head.innerHTML = `
        <div>
          <div class="title">${t.label}</div>
          <div class="meta">目标：${targetLabel}（展示框：${t.w}×${t.h}）</div>
        </div>
        <div class="meta">${openLink}</div>
      `;

      const body = document.createElement('div');
      body.className = 'card-body';

      const left = document.createElement('div');
      left.className = 'panel';
      left.innerHTML = `
        <div class="panel-head"><strong>网站当前图片</strong><span>object-fit: contain</span></div>
        <div class="img-wrap">
          <div class="img-box fit-contain" style="--w:${t.w};--h:${t.h}">
            ${t.targetPath ? `<img src="${t.targetPath}" alt="${t.label} 原图" loading="lazy" />` : `<div class="placeholder">无原图（这是新增图片位）</div>`}
          </div>
        </div>
        <div class="hint">左侧只用于对比（新增位没有原图）。</div>
      `;

      const right = document.createElement('div');
      right.className = 'panel';
      right.innerHTML = `
        <div class="panel-head"><strong>替换图候选</strong><span>可切换候选</span></div>
        <div class="row">
          <div class="left">
            <span class="badge">候选</span>
            <select data-role="picker">${optionHtml(t.candidates)}</select>
          </div>
          <div class="meta"><a data-role="open" href="#" target="_blank" rel="noreferrer">打开替换图</a></div>
        </div>
        <div data-role="raw" class="img-wrap">
          <div class="img-box fit-contain" style="--w:${t.w};--h:${t.h}">
            <img data-role="rawImg" src="" alt="${t.label} 替换图（原始比例预览）" loading="lazy" />
          </div>
        </div>
        <div data-role="crop" class="img-wrap">
          <div class="img-box fit-cover" style="--w:${t.w};--h:${t.h}">
            <img data-role="cropImg" src="" alt="${t.label} 替换图（裁剪预览）" loading="lazy" />
          </div>
        </div>
        <div class="hint">“裁剪预览”模拟实际替换时为了匹配展示区域而进行的居中裁剪。</div>
      `;

      body.appendChild(left);
      body.appendChild(right);
      card.appendChild(head);
      card.appendChild(body);

      const picker = right.querySelector('[data-role=picker]');
      const raw = right.querySelector('[data-role=raw]');
      const crop = right.querySelector('[data-role=crop]');
      const rawImg = right.querySelector('[data-role=rawImg]');
      const cropImg = right.querySelector('[data-role=cropImg]');
      const open = right.querySelector('[data-role=open]');

      function setReplacement(id) {
        const r = byId[id];
        rawImg.src = r.path;
        cropImg.src = r.path;
        open.href = r.path;
      }

      picker.addEventListener('change', () => setReplacement(picker.value));

      function applyVisibility() {
        raw.style.display = elShowRaw.checked ? '' : 'none';
        crop.style.display = elShowCrop.checked ? '' : 'none';
      }

      elShowRaw.addEventListener('change', applyVisibility);
      elShowCrop.addEventListener('change', applyVisibility);

      function applyDefault() {
        const mode = elDefaultSet.value;
        if (mode === 'none') return;
        if (mode === 'first') picker.value = t.candidates[0];
        if (mode === 'suggested') picker.value = (t.suggested && t.candidates.includes(t.suggested)) ? t.suggested : t.candidates[0];
        setReplacement(picker.value);
      }

      elDefaultSet.addEventListener('change', applyDefault);

      applyVisibility();
      applyDefault();
      return card;
    }

    function render() {
      elGrid.innerHTML = '';
      targets.forEach(t => elGrid.appendChild(createCard(t)));
    }

    render();
  </script>
</body>
</html>
